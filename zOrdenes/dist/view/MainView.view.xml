<mvc:View
    controllerName="zOrdenes.controller.MainView"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:semantic="sap.f.semantic"
    xmlns:layout="sap.ui.layout"
    xmlns:u="sap.ui.unified"
>
    <semantic:SemanticPage
        id="Principal"
        headerPinnable="false"
        toggleHeaderOnTitleClick="false"
    >
        <semantic:titleHeading>
            <Title
                id="_IDGenTitle"
                text="{i18n>title}"
            />
        </semantic:titleHeading>
        <semantic:headerContent>
            <IconTabBar
                id="_IDGenIconTabBar"
                select=".onQuickFilter"
                expandable="false"
            >
                <items>
                    <IconTabFilter
                        id="_IDGenIconTabFilter1"
                        key="all"
                        showAll="true"
                        count="{countsModel>/all}"
                        text="{i18n>title}"
                    />
                    <IconTabSeparator id="_IDGenIconTabSeparator" />
                    <IconTabFilter
                        id="_IDGenIconTabFilter2"
                        key="opened"
                        icon="sap-icon://open-folder"
                        iconColor="Default"
                        count="{countsModel>/opened}"
                        text="{i18n>opened}"
                    />
                    <IconTabFilter
                        id="_IDGenIconTabFilter3"
                        key="toinvoice"
                        icon="sap-icon://shipping-status"
                        iconColor="Critical"
                        count="{countsModel>/PorFacturar}"
                        text="{i18n>delivered}"
                    />
                    <IconTabFilter
                        id="_IDGenIconTabFilter4"
                        key="invoiced"
                        icon="sap-icon://my-sales-order"
                        iconColor="Positive"
                        count="{countsModel>/Facturado}"
                        text="{i18n>invoiced}"
                    />
                </items>
                <content>
                    <layout:BlockLayout
                        id="blockLayout"
                        background="Dashboard"
                    >
                        <layout:BlockLayoutRow id="t1">
                            <layout:BlockLayoutCell
                                id="_IDGenBlockLayoutCell1"
                                width="1"
                            >
                                <Table
                                    id="table"
                                    width="auto"
                                    items="{path:'localModel>/Pedidos'}"
                                    growing="true"
                                    growingScrollToLoad="true"
                                    updateFinished=".contador"
                                    selectionChange="onSelectionChange"
                                >
                                    <headerToolbar>
                                        <OverflowToolbar
                                            id="_IDGenOverflowToolbar"
                                        >
                                            <Title
                                                id="_IDGenTitle1"
                                                text="{i18n>titleorders}"
                                                level="H3"
                                            />
                                            <ToolbarSpacer
                                                id="_IDGenToolbarSpacer"
                                            />
                                            <Button press="getBP" />
                                            <SearchField
                                                id="searchField"
                                                search=".onSearch"
                                                width="auto"
                                            />
                                            <DateRangeSelection
                                                id="filterdate"
                                                width="auto"
                                                change="onSearchDate"
                                                showCurrentDateButton="true"
                                            />

                                            <Button
                                                icon="sap-icon://decline"
                                                tooltip="Limpiar fecha"
                                                type="Transparent"
                                                press=".onClearDateRange"
                                                class="clearIcon"
                                            />
                                            <u:FileUploader
                                                id="_IDGenFileUploader"
                                                icon="sap-icon://upload-to-cloud"
                                                style="Emphasized"
                                                buttonText="Cargar Factura"
                                                buttonOnly="true"
                                                visible="false"
                                                change="onFileUploaderChange"
                                                multiple="true"
                                                fileType="xml,pdf"
                                                sameFilenameAllowed="true"
                                                enabled="false"
                                            />
                                            <Button
                                                id="oButtonDownload"
                                                text="Descargar Factura"
                                                icon="sap-icon://download"
                                                type="Emphasized"
                                                visible="false"
                                            />
                                        </OverflowToolbar>
                                    </headerToolbar>

                                    <columns>
                                        <Column
                                            id="No.pedido"
                                            minScreenWidth="Tablet"
                                            demandPopin="true"
                                        >
                                            <Text
                                                text="{i18n>No.pedido}"
                                                id="_IDGenText1"
                                            />
                                        </Column>
                                        <Column
                                            id="Solicitante"
                                            minScreenWidth="Tablet"
                                            demandPopin="true"
                                        >
                                            <Text
                                                text="{i18n>Solicitante}"
                                                id="_IDGenText2"
                                            />
                                        </Column>

                                        <Column
                                            id="Monto"
                                            minScreenWidth="Tablet"
                                            demandPopin="true"
                                        >
                                            <Text
                                                text="{i18n>Monto}"
                                                id="_IDGenText5"
                                            />
                                        </Column>
                                        <Column
                                            id="FechaEntrega"
                                            minScreenWidth="Tablet"
                                            demandPopin="true"
                                        >
                                            <Text
                                                text="{i18n>FechaEntrega}"
                                                id="_IDGenText6"
                                            />
                                        </Column>
                                    </columns>

                                    <items>
                                        <ColumnListItem
                                            id="_IDGenColumnListItem"
                                            type="Navigation"
                                            press=".onPress"
                                        >
                                            <cells>
                                                <Text
                                                    id="NoPedido"
                                                    text="{localModel>NoPedido}"
                                                />
                                            </cells>
                                            <cells>
                                                <Text
                                                    id="CSolicitante"
                                                    text="{localModel>Solicitante}"
                                                />
                                            </cells>

                                            <cells>
                                                <Text
                                                    id="CMonto"
                                                    text="$ {path:'localModel>Total',
                                                    formatter:'.currencyFormat'                                                
                                                    }"
                                                />
                                            </cells>
                                            <cells>
                                                <Text
                                                    id="CFecha"
                                                    text="{localModel>Fechadeentrega}"
                                                />
                                            </cells>
                                        </ColumnListItem>
                                    </items>
                                </Table>
                            </layout:BlockLayoutCell>
                        </layout:BlockLayoutRow>
                    </layout:BlockLayout>
                </content>
            </IconTabBar>
        </semantic:headerContent>
    </semantic:SemanticPage>
</mvc:View>
